<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Velo Data Dash</title>
    <link rel="stylesheet" href="styles.css"/>
    <link rel="shortcut icon" type="image/x-icon" href="velo.ico"/>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h1>VELO DATA DASH</h1>
    <div id="loading">LOADING DATA, PLEASE WAIT...</div>
    <div id="error" style="display:none;"></div>
    <div id="dashboard" style="display:none;">
        <div class="tab">
            <button class="tablinks" onclick="openTab(event, 'OverviewTab')" id="defaultOpen">Stats</button>
            <button class="tablinks" onclick="openTab(event, 'LeagueScoresTab')">League Scores</button>
            <button class="tablinks" onclick="openTab(event, 'Top50Tab')">Top 50 Cyclists</button>
            <button class="tablinks" onclick="openTab(event, 'CostVsPointsTab')">Cost vs Points</button>
            <button class="tablinks" onclick="openTab(event, 'CyclistDataTab')">Cyclist Data Table</button>
            <button class="tablinks" onclick="openTab(event, 'RiderTrajectoryTab')">Riders</button>
            <button class="tablinks" onclick="openTab(event, 'IdealTeamTab')">Dream Team</button>
        </div>

        <div id="OverviewTab" class="tabcontent">
            <div class="stats-container" id="stats"></div>
            <div class="chart-container">
                <canvas id="roleChart"></canvas>
            </div>
        </div>

        <div id="LeagueScoresTab" class="tabcontent">
            <div class="chart-container">
                <div id="leagueScoresChart"></div>
            </div>
        </div>

        <div id="Top50Tab" class="tabcontent">
            <div class="chart-container">
                <div id="top50Chart"></div>
            </div>
            <div class="chart-container">
                <div id="pointsPerNameLengthChart"></div>
            </div>
        </div>
        
        <div id="CostVsPointsTab" class="tabcontent">
            <div class="chart-container">
                <div id="costVsPointsChart"></div>
            </div>
        </div>

        <div id="CyclistDataTab" class="tabcontent">
            <h2>Cyclist Data</h2>
            <table id="cyclistTable">
                <thead>
                    <tr>
                        <th onclick="sortTable(0)">Name</th>
                        <th onclick="sortTable(1)">Team</th>
                        <th onclick="sortTable(2)">Role</th>
                        <th onclick="sortTable(3)">Cost</th>
                        <th onclick="sortTable(4)">Points</th>
                        <th onclick="sortTable(5)">Cost/Point</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    
<div id="RiderTrajectoryTab" class="tabcontent">
    <div class="trajectory-container">
        <div class="trajectory-header">
            <h2>Rider Point Trajectories</h2>
            <div class="dropdown-container">
                <select id="riderSelect" class="styled-select" onchange="updateTrajectoryChart()">
                    <option value="top10">Top 10 Riders</option>
                    <option value="all">All Riders</option>
                    <option disabled>------------------------</option>
                    <!-- Individual rider options will be populated here -->
                </select>
            </div>
        </div>
        <div class="chart-legend-container">
            <div class="chart-container">
                <div id="trajectoryChart"></div>
            </div>
            <div class="legend-container" id="customLegend"></div>
        </div>
    </div>
    <div class="mvp-mip-container">
        <div id="mvpInfo" class="info-box"></div>
        <div id="mipInfo" class="info-box"></div>
    </div>
</div>

        <div id="IdealTeamTab" class="tabcontent">
            <h2>Dream Team (Max Cost: 100)</h2>
            <div id="dreamTeamStats"></div>
            <div id="dreamTeamRiders"></div>
            <div class="chart-container">
                <canvas id="dreamTeamChart"></canvas>
            </div>
        </div>
    </div>

    <p>VISIT COUNT: <span id="visit-count">1</span></p>

    <script src="script.js"></script>
</body>
</html>
